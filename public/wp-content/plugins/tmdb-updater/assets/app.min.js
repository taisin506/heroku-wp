!function(o){TMDbUpdater={},o(function(){TMDbUpdater.Form(),TMDbUpdater.Analytics()}),TMDbUpdater.Form=function(){var t="#tmdb-metaupdater",r="#tmdb-progress-submit",n="#tmdb-progress-page";1<parseInt(o(n).val())&&o("#tmdb-progress-line").addClass("flashit"),o(document).on("click","#tmdb-progress-reset",function(){var t=o(this).data("nonce");return o.ajax({url:tmdbupdater.url,type:"POST",dataType:"json",data:{nonce:t,action:"tmdb_reset"},success:function(t){1==t.success&&location.reload()}}),!1}),o(document).on("click","#tmdb-calculator",function(){var t=o(this).data("nonce");return o.ajax({url:tmdbupdater.url,type:"POST",dataType:"json",data:{nonce:t,action:"tmdb_calculator"},success:function(t){1==t.success&&location.reload()}}),!1}),o(document).on("submit",t,function(){var e=parseInt(o(n).val()),a=parseInt(o("#tmdb-progress-total").val()),s=e/a*100;return o(r).prop("disabled",!0),o(t).hide(),o("#tmdb-progress-reset").hide(),o("#tmdb-progress-line").removeClass("flashit"),o("#tmdb-progress-loader").show(),o("#tmdb-updater-log").show(),o.ajax({url:tmdbupdater.url,type:"POST",dataType:"json",data:o(this).serialize(),success:function(t){TMDbUpdater.LogItem(t),o(r).prop("disabled",!1),o(n).val(e+1),o("#tmdb-progress-percentage").html(Math.round(s)+"%"),o("#tmdb-progress-line").animate({width:s+"%"},150,function(){}),e<a?(setTimeout(function(){o(r).trigger("click")},500),o("#tmdb-processes").html(e+" | "+a)):(o("#tmdb-progress-loader").hide(),o("#tmdb-processes").addClass("flashit"),o("#tmdb-processes").html(tmdbupdater.completed))}}),!1})},TMDbUpdater.LogItem=function(t){var e="";if(1==t.success)e='<span class="type">'+t.post_type+"</span>"+('<a href="'+t.permalink+'" target="_blank">'+t.post_tile+"</a>")+('<span class="microtime">'+t.exetime+"</span>");else e=t.message;o("#tmdb-log-indicator").after('<li class="fadein">'+e+"</li>")},TMDbUpdater.Analytics=function(){1==o("#tmdb-metaupdater").length&&o.getScript("https://www.googletagmanager.com/gtag/js?id=UA-110545295-1",function(){function t(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],t("js",new Date),t("config","UA-110545295-1")})}}(jQuery);
