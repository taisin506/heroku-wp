!function(e){var a={};Doc=e(document);Ajx=dooAj.url;e(function(){a.SimpleClicks();a.LicenseApiRest();a.FeaturedTitles();a.UploadBackdrop();a.AdTabsManage();a.SaveAdOptions();a.LinkPost();a.LinkDelete();a.LinkEditor();a.LinkReload();a.LinkSave();a.UpdateOptions();a.UpdateDatabase();a.DatabaseTool()});a.SimpleClicks=function(){Doc.on("click",".requestscontrol",function(){var f=e(this).data("post");e("#request_post_"+f).html(dooAj.loading)});Doc.on("click","#doolinks_response > tr",function(){e(this).toggleClass("active")});Doc.on("click","#dooplay_anchor_showform",function(){e(".dform").fadeIn(500);e(".dpre").hide();return false});Doc.on("click","#dooplay_anchor_hideform",function(){e(".dpre").fadeIn(500);e(".dform").hide();return false});Doc.on("click","#doolinkeditor_cancel",function(){var f=e(this).data("id");e(".managelinks").show();e("#dooeditorlink-"+f).remove();return false});Doc.on("click",".doo-nav-tab",function(){var f=e(this).attr("data-tab");e(".doo-nav-tab").removeClass("nav-tab-active");e(".dt_boxg").removeClass("current");e(this).addClass("nav-tab-active");e("#"+f).addClass("current");return false});Doc.on("submit","#post",function(){if(e("#dooplay_lfield_urls").val()){if(confirm(dooAj.confirmpublink)==true){e("#dooplay_anchor_postlinks").trigger("click")}}})};a.LicenseApiRest=function(){Doc.on("click","#api_doothemes",function(){e(".apivalue").html(dooAj.loading);var f=dooAj.doothemes_server;b=dooAj.doothemes_item;c=dooAj.doothemes_license;d=dooAj.domain;e.getJSON(f+"/app/?edd_action=check_license&license="+c,function(g){e.each(g,function(i,h){e("#"+i).html(h),"license"==i&&("item_name_mismatch"==h?e("#license").html('<span class="valid_dt_key_info">ON</span> <code>'+c+"</code>"):e("#license").html('<span class="invalid_dt_key_info">OFF</span> <code>'+c+"</code>"))})});return false})};a.FeaturedTitles=function(){Doc.on("click",".add-to-featured",function(){var f=e(this).data("postid");nonce=e(this).data("nonce");e("#feature-add-"+f).html(dooAj.loading);e.ajax({url:Ajx,type:"post",data:{postid:f,nonce:nonce,action:"dt_add_featured"},error:function(g){console.log(g)},success:function(g){e("#feature-add-"+f).html(dooAj.add_featu);e("#feature-add-"+f).hide();e("#feature-del-"+f).show()}});return false});Doc.on("click",".del-of-featured",function(){var g=e(this).data("postid");var f=e(this).data("nonce");e("#feature-del-"+g).html(dooAj.loading);e.ajax({url:Ajx,type:"post",data:{postid:g,nonce:f,action:"dt_remove_featured"},error:function(h){console.log(h)},success:function(h){e("#feature-del-"+g).html(dooAj.rem_featu);e("#feature-add-"+g).show();e("#feature-del-"+g).hide()}});return false})};a.UploadBackdrop=function(){Doc.on("click",".import-upload-image",function(){var f=e(this).data("prelink");nonce=e(this).data("nonce");field=e(this).data("field");postid=e(this).data("postid");image=e("#"+field).get(0).value;urlimage=f+image;if(image){e(".import-upload-image").hide();e("#"+field).val(dooAj.loading);e("#"+field).prop("disabled",true);e.ajax({url:Ajx,type:"post",data:{url:urlimage,nonce:nonce,field:field,postid:postid,action:"dt_upload_ajax_image"},error:function(g){console.log(g)},success:function(g){e("#"+field).prop("disabled",false);e("#"+field).val(g)}})}return false})};a.AdTabsManage=function(){if(e("#dooadmenu > li.nav-tab").length>1){Doc.on("click","#dooadmenu > li.nav-tab",function(){var f=e(this).data("tab");if(f!=false){e("#dooadmenu > li.nav-tab").removeClass("nav-tab-active");e(".tab-content").removeClass("on");e(this).addClass("nav-tab-active");e("#dooad-"+f).addClass("on")}return false})}};a.SaveAdOptions=function(){Doc.on("submit","#dooadmanage",function(){var f="#dooadsavebutton";that=e(this);text=e(f).data("text");e(f).prop("disabled",true);e(f).val(dooAj.loading);e("#ad-manage-codes").addClass("hidden");e.ajax({url:Ajx,type:"post",dataType:"json",data:that.serialize(),error:function(g){console.log(g)},success:function(g){if(g.success==true){e("#ad-manage-codes").removeClass("hidden");e(f).prop("disabled",false);e(f).val(text)}}});return false})};a.LinkPost=function(){Doc.on("click","#dooplay_anchor_postlinks",function(){if(e("#dooplay_lfield_urls").val()){e("#doolinks_response").addClass("onload");e("#publish").hide();e.ajax({url:Ajx,type:"post",data:{urls:e("#dooplay_lfield_urls").val(),type:e("#dooplay_lfield_type").val(),quality:e("#dooplay_lfield_qual").val(),language:e("#dooplay_lfield_lang").val(),size:e("#dooplay_lfield_size").val(),postid:e("#post_ID").val(),action:"doosave_links"},error:function(f){console.log(f)},success:function(f){e("#publish").show();e("#doolinks_response").removeClass("onload");e("#doolinks_response").html(f);e("#dooplay_lfield_urls").val("");e("#dooplay_lfield_size").val("")}})}else{alert(dooAj.nolink)}return false})};a.LinkDelete=function(){Doc.on("click",".doodelete_links",function(){var f=e(this).data("id");answer=confirm(dooAj.deletelink);if(answer){e.ajax({url:Ajx,type:"post",data:{id:f,action:"doodelt_links"},error:function(g){console.log(g)},success:function(g){e("#link-"+f).remove();e("#dooeditorlink-"+f).remove()}})}return false})};a.LinkEditor=function(){Doc.on("click",".dooedit_links",function(){var f=e(this).data("id");e(".doo_link_editor").remove();e(".managelinks").show();e("#link-"+f).addClass("onload");e("#link-"+f).removeClass("fadein");e("#link-"+f+" > td > .managelinks").hide();e.ajax({url:Ajx,type:"post",data:{id:f,action:"dooformeditor_links"},error:function(g){console.log(g)},success:function(g){e("#link-"+f).removeClass("onload");e("#link-"+f).after(g);e("#doolinkeditor_url").focus();e("#link-"+f+" > .managelinks").hide()}});return false})};a.LinkReload=function(){Doc.on("click","#dooplay_anchor_reloadllist",function(){var f=e(this).data("id");e("#doolinks_response").addClass("onload");e.ajax({url:Ajx,type:"post",data:{id:f,action:"dooreload_links"},error:function(g){console.log(g)},success:function(g){e("#doolinks_response").removeClass("onload");e("#doolinks_response").html(g)}});return false})};a.LinkSave=function(){Doc.on("click","#doolinkeditor_save",function(){var f=e(this).data("id");e.ajax({url:Ajx,type:"post",data:{id:f,url:e("#doolinkeditor_url").val(),lang:e("#doolinkeditor_lang").val(),type:e("#doolinkeditor_type").val(),quality:e("#doolinkeditor_quality").val(),size:e("#doolinkeditor_size").val(),action:"doosaveformeditor_links"},error:function(g){console.log(g)},success:function(g){e("#link-"+f).addClass("fadein");e("#link-"+f).html(g);e(".doo_link_editor").remove()}});return false})};a.UpdateOptions=function(){Doc.on("click",".dooplay_update_database",function(){e("#cfg_dts").html(dooAj.updb);e.ajax({url:Ajx,type:"post",data:{action:"update_dbdooplay"},error:function(f){console.log(f)},success:function(f){location.reload()}});return false})};a.UpdateDatabase=function(){Doc.on("submit","#doolinkmod_form",function(){var f=e(this);e("#doolinkmod_submit").prop("disabled",true);e.ajax({url:Ajx,type:"post",dataType:"json",data:f.serialize(),error:function(g){console.log(g)},success:function(h){e("#doolinkmod_submit").prop("disabled",false);e("#doolinkmod > .response").show();e(".doo-progress > div").animate({width:h.percentage+"%",},150,function(){});if(h.step){var g=parseFloat(h.step)+parseFloat(1);e("#doolinkmod_step").val(g);e("#doolinkmod_submit").trigger("click")}else{if(h.next){e("#doolinkmod_run").val(h.next);e("#doolinkmod_submit").trigger("click")}else{e("#doolinkmod_form").remove();e("#doolinkmod").removeClass("required");e("#doolinkmod > .response").html('<div class="notice fadein">'+dooAj.completed+"</div>")}}}});return false})};a.DatabaseTool=function(){Doc.on("click",".doodatabasetool",function(){var h=e(this);var i=h.data("run");var f=e("#doolinkmod_nonce").val();var g=confirm(dooAj.confirmdbtool);if(g){e(h).addClass("disabled");e("#doodatabasetool_"+i).html(dooAj.loading);e.ajax({url:Ajx,type:"post",dataType:"json",data:{run:i,noc:f,action:"dooplaydbtool"},error:function(j){console.log(j)},success:function(j){e(h).removeClass("disabled");if(j.response==true){e("#doodatabasetool_"+i).html(j.message);if(j.remove==true){e("#doobox_"+i).remove()}}}})}return false})}}(jQuery);